!function(e){function t(t){for(var r,a,u=t[0],c=t[1],s=t[2],f=0,p=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={1:0,2:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=c;i.push([132,0,3]),n()}({132:function(e,t,n){"use strict";n.r(t);n(40),n(49),n(50),n(104),n(105),n(51),n(36),n(109),n(18),n(12),n(55),n(56);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"routes",[]),o(this,"nodeId","app"),this.routes=t.routes,this.defineComponents(),this.loadDefault(),this.onRouteChanged(),window.router=this}var t,n,i;return t=e,(n=[{key:"defineComponents",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.routes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;customElements.define(i.name,i.component)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},{key:"onRouteChanged",value:function(){var e=this;window.addEventListener("hashchange",(function(t){var n=t.newURL.substr(t.newURL.indexOf("#")+1,t.newURL.length),r=e.routes.find((function(e){return e.path==n}));if(r){var o=document.getElementById("app"),i=document.createElement(r.name);o.innerHTML="",o.appendChild(i)}else console.error("This route not exists")}))}},{key:"loadDefault",value:function(){var e=this.routes.filter((function(e){return e.default}));if(!e)throw new Error("Default router not provided to the router");this.natigateTo(e[0].path)}},{key:"natigateTo",value:function(e,t){var n=this.routes.find((function(t){return t.path==e}));if(n){var r=document.getElementById("app"),o=document.createElement(n.name);r.innerHTML="",r.appendChild(o),window.location.hash=e}else console.error("This route not exists")}}])&&r(t.prototype,n),i&&r(t,i),e}();n(81),n(82),n(84),n(89),n(90),n(91),n(19),n(95),n(96),n(20);function a(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}var u=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}(),c={onClick:function(e,t){try{document.getElementById(e).addEventListener("click",t)}catch(e){console.log(e)}},onSubmit:function(e,t){try{document.getElementById(e).addEventListener("submit",t)}catch(e){}},onDomReady:function(e){document.addEventListener("DOMContentLoaded",e)},addClass:function(e,t){try{document.getElementById(e).classList.add(t)}catch(e){}},removeClass:function(e,t){try{document.getElementById(e).classList.remove(t)}catch(e){}},val:function(e){return document.getElementById(e).value},hideElement:function(e){document.getElementById(e).style.display="none"}};n(125);function s(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,u,"next",e)}function u(e){s(i,r,o,a,u,"throw",e)}a(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUri=t&&t.baseUri||window.API_URI,this.token=t&&t.baseUri||localStorage.getItem("_token"),this.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}}var t,n,r,o,i;return t=e,(n=[{key:"Post",value:(i=l(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.headers,e.next=3,fetch("".concat(this.baseUri).concat(t),{method:"POST",headers:r,body:JSON.stringify(n)});case 3:if((o=e.sent).ok){e.next=6;break}throw new Error("Request failed , status code :"+o.statusText);case 6:return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"Get",value:(o=l(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.headers,e.next=3,fetch("".concat(this.baseUri).concat(t),{method:"GET",headers:n});case 3:if(200===(r=e.sent).status){e.next=6;break}throw new Error("Request failed , status code :"+r.status);case 6:return e.next=8,r.json();case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}])&&f(t.prototype,n),r&&f(t,r),e}();function h(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,u,"next",e)}function u(e){h(i,r,o,a,u,"throw",e)}a(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=null,(n="user")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.http=new p}var t,n,r,o,i;return t=e,n=[{key:"authenticate",value:(i=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.Post("login",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"register",value:(o=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.Post("register",t);case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}],r=[{key:"logout",value:function(){}},{key:"user",get:function(){return localStorage.getItem("user")||null}}],n&&d(t.prototype,n),r&&d(t,r),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){var t="function"==typeof Map?new Map:void 0;return(k=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,O(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,e)})(e)}function P(e,t,n){return(P=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&x(o,n.prototype),o}).apply(null,arguments)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){function t(){var e,n,r,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=O(t).call(this))||"object"!==y(r)&&"function"!=typeof r?g(n):r,o=g(e),a="./templates/login.html",(i="templateUri")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,e.auth=new m,window.localStorage.getItem("_token")?window.location.hash="/blog":e.render(),e}var n,r,o,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"connectedCallback",value:function(){}},{key:"setup",value:function(){var e=this;c.onSubmit("login-frm",(function(t){t.preventDefault();var n=c.val("inputEmail"),r=c.val("inputPassword");try{e.auth.authenticate({email:n,password:r}).then((function(e){localStorage.setItem("_token",e.token),window.location.hash="/blog"})).catch((function(e){c.removeClass("login-alert","hide-element")}))}catch(e){}})),c.onSubmit("register-frm",(function(t){t.preventDefault(),t.stopPropagation();var n=c.val("name"),r=c.val("email"),o=c.val("password");o!==c.val("confirm-password")&&alert("Las contraseñas no coinciden"),e.auth.register({email:r,password:o,name:n}).then((function(t){t&&e.showLoginForm()})).catch((function(){alert("Datos invalidos!")}))})),c.onClick("btn-dismiss-alert",(function(){c.addClass("login-alert","hide-element")})),c.onClick("show-register",(function(e){e.preventDefault(),c.addClass("form-login","hide-element"),c.removeClass("form-register","hide-element")})),c.onClick("btn-cancel",(function(e){e.preventDefault(),c.removeClass("form-login","hide-element"),c.addClass("form-register","hide-element")}))}},{key:"showRegisterForm",value:function(){c.addClass("form-login","hide-element"),c.removeClass("form-register","hide-element")}},{key:"showLoginForm",value:function(){c.removeClass("form-login","hide-element"),c.addClass("form-register","hide-element")}},{key:"render",value:(i=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(this.templateUri);case 2:t=e.sent,this.innerHTML=t,this.setup();case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){b(o,n,r,a,u,"next",e)}function u(e){b(o,n,r,a,u,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}])&&w(n.prototype,r),o&&w(n,o),t}(k(HTMLElement));n(127),n(128);function S(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.http=new p}var t,n,r,o,i;return t=e,(n=[{key:"getPosts",value:(o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.http.Get("post");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){S(i,n,r,a,u,"next",e)}function u(e){S(i,n,r,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&E(t.prototype,n),r&&E(t,r),e}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,u,"next",e)}function u(e){C(i,r,o,a,u,"throw",e)}a(void 0)}))}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){var t="function"==typeof Map?new Map:void 0;return(M=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return D(e,arguments,B(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),U(r,e)})(e)}function D(e,t,n){return(D=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&U(o,n.prototype),o}).apply(null,arguments)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=[{name:"login-component",path:"/login",component:R,default:!0},{name:"home-component",path:"/blog",component:function(e){function t(){var e,n,r,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=B(t).call(this))||"object"!==T(r)&&"function"!=typeof r?I(n):r,o=I(e),a="./templates/home.html",(i="templateUri")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,e.postService=new j,window.localStorage.getItem("_token")||(window.location.hash="/login"),e.render(),e}var n,r,o,i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"connectedCallback",value:function(){console.log("Home component is connected")}},{key:"addListeners",value:function(){c.onClick("btn-logout",(function(e){e.preventDefault(),localStorage.removeItem("_token"),window.location.hash="/login"}))}},{key:"renderPosts",value:(s=_(regeneratorRuntime.mark((function e(){var t,n,r,o,i,a,u,c,s,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.postService.getPosts();case 2:return t=e.sent,n=document.getElementById("posts-list"),e.next=6,this.getPostTemplate();case 6:for(r=e.sent,o="",i=!0,a=!1,u=void 0,e.prev=11,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)l=s.value,f=r.replace("@POST_TITLE",l.title).replace("@POST_SUMMARY",l.body).replace("@POST_DATE",l.createdAt).replace("@USER",l.userName),o+=f,f="";e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),a=!0,u=e.t0;case 19:e.prev=19,e.prev=20,i||null==c.return||c.return();case 22:if(e.prev=22,!a){e.next=25;break}throw u;case 25:return e.finish(22);case 26:return e.finish(19);case 27:n.innerHTML=o;case 28:case"end":return e.stop()}}),e,this,[[11,15,19,27],[20,,22,26]])}))),function(){return s.apply(this,arguments)})},{key:"getPostTemplate",value:(a=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("../templates/singlePost.html");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"render",value:(i=_(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(this.templateUri);case 2:return t=e.sent,this.innerHTML=t,this.addListeners(),e.next=7,this.renderPosts();case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}])&&L(n.prototype,r),o&&L(n,o),t}(M(HTMLElement))}];n(37),new i({routes:H})},37:function(e,t,n){"use strict";n.r(t);n(38),n(39),n(60)},38:function(e,t){window.API_URI="http://itla.hectorvent.com/api/"},39:function(e,t,n){}});